{% extends 'base.html' %}
{% block content %}
<h2>Список столиков</h2>

<form method="get">
    <label>Фильтр по местам:</label>
    <input type="number" name="seats" value="{{ request.GET.seats }}">
    <button type="submit">Найти</button>
</form>

<table border="1">
    <tr>
        <th>Номер</th>
        <th>Места</th>
        <th>Картинка</th>
        <th>Действие</th>
    </tr>
    {% for table in tables %}
    <tr>
        <td>{{ table.number }}</td>
        <td>{{ table.seats }}</td>
        <td>
            {% if table.image %}
                <img src="{{ table.image.url }}" width="100">
            {% else %}
                Нет изображения
            {% endif %}
        </td>
        <td>
            {% if user.is_authenticated %}
                <a href="{% url 'new_reservation' %}?table_id={{ table.id }}">Забронировать</a>
            {% else %}
                <a href="{% url 'login' %}">Войдите, чтобы забронировать</a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
